<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title >Web tachdata</title>
    <!-- add 404 by using waiting-web-page/index.html -->
    <!-- <link rel="404-page"href="waiting-web-page/index.html">  -->
    <link rel="website_icon" type="png" href="/static/icons/terminal1.png>
    <script src="https://cdn.tailwindcss.com">
    
    <style>
        body { 
            display: flexbox;
            background-image: url("/static/background/bigdatebackground.jpg");
            background-size: cover;
            background-position: center;
            height: 100vh;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: Arial, sans-serif;
            margin : 0;
            padding : 0;

        }
        upload_form {
            display: flex;
            flex-direction  : column;
            align-items: center;
            justify-content: space-around;
        }
        textarea {
            width: 900px;
            height: 250px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            font-size: 16px;
            resize: none;
        }
        select {
            width: 940px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: #f8f9fa;
            font-size: 16px;
        }
        select:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }
        button {
            padding: 10px 20px;
            border-radius: 5px; 
        }
        </style>
</head>
<body>
    <h1>Welcome to Web Tachdata</h1>
    <p>Can you first upload your file</p>
    <!-- upload file -->
    <form id="process-botton" enctype="multipart/form-data" alt="upload_form">
        <label for="file">Upload a file:</label>
        <input type="file" id="file" name="file" accept=".txt, .csv, .xlsx">
        <button type="post">post</button>
    </form>
    <div alt="output_part",
     class="bg-white p-8 rounded-2xl shadow-xl max-w-2xl w-full">
        <!-- A simple heading -->
        <h3 alt="title">Select your task</h3>
        <select name="sellect_part" 
            id="user_choice",
            class="w-full p-3 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
            >
            <option value="1">1. thay đổi biến</option>
            <option value="2">2. chuyển từ dạng text sang num</option>
            <option value="3">3. Xóa hàng với từng biến được chọn</option>
            <!-- <option value="data_transformation">Data Transformation</option>
            <option value="data_export">Data Export</option> -->
        </select>
        <h3 alt="terminal">Terminal Part</h3>
        <textarea
            id="typing-box"
            class="w-full h-64 p-4 text-gray-700 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"
            /* placeholder=">" */
        ></textarea>
    </div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const terminal = document.getElementById('typing-box');
        const userchoice = document.getElementById('user_choice');
        let prompt = '> '; // use let to easy to modify 


        //update the terminal 
        function updatePrompt(newPrompt){
            prompt = newPrompt;

            const lines = terminal.value.split('\n');
            lines[lines.length - 1] = prompt;
            terminal.value = lines.join('\n');
            terminal.scrollTop = terminal.scrollHeight;
        }

        //Event listem for the select menu 
        userchoice.addEventListener('change',(event) => {
            const selectValue = event.target.value;
            updatePrompt(selectValue + '> ');
        });



        // Set the initial value and focus on the textarea.
        terminal.value = prompt;
        // This line is commented out in your code. It's a good practice to include it
        // to automatically place the cursor in the terminal when the page loads.
        terminal.focus(); 

        terminal.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();

                // Split the content by newlines to get individual lines.
                const lines = terminal.value.split('\n');
                
                // Get the last line where the user typed their command.
                const lastLine = lines[lines.length - 1];
                
                // Extract the command by removing the prompt and any leading/trailing whitespace.
                const command = lastLine.substring(prompt.length).trim();
                
                let output = '';

                switch (command) {
                    case 'help':
                        output = `
Available commands:
  help: Show this help message.
  clear: Clear the terminal screen.
  echo <message>: Repeat the message.
                        `.trim();
                        break;
                    case 'clear':
                        // If the command is 'clear', reset the textarea to just the prompt.
                        terminal.value = prompt;
                        return; // Exit the function to prevent adding a newline.
                    case 'date':
                        output = new Date().toLocaleString();
                        break;

                    
                    default:
                        if (command.startsWith('echo')) {
                            // If the command is 'echo', get the message after 'echo'.
                            output = command.substring(5).trim();
                        } else {
                            // If the command is not recognized, show an error message.
                            output = `Error: command not found: ${command}`;
                        }
                }
                
                // Add the output and a new prompt line to the textarea's value.
                terminal.value += '\n' + output + '\n' + prompt;

                // Automatically scroll to the bottom to show the latest output.
                terminal.scrollTop = terminal.scrollHeight;
            }
        });
    });
</script>
</body>
</html>